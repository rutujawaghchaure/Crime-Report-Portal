<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crime Reporting System</title>
    <link rel="stylesheet" href="style.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        /* body{
            display: flex;
            flex-direction: column;
            align-content: center;
            width: 100%;
        } */
        /* Navbar Styles */
        .navbar {
            background-color: #1a237e;
            padding: 1rem 2rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
            text-decoration: none;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .nav-links a:hover {
            color: #c5cae9;
        }

        /* Hero Section Styles */
        .hero {
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('/api/placeholder/1200/400') center/cover;
            color: white;
            padding: 4rem 2rem;
            text-align: center;
        }

        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .hero p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .cta-button {
            display: inline-block;
            padding: 1rem 2rem;
            background-color: #1a237e;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

        .cta-button:hover {
            background-color: #283593;
        }

        /* Services Section */
        .services {
            padding: 4rem 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .services h2 {
            text-align: center;
            margin-bottom: 3rem;
            color: #1a237e;
        }

        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }

        .service-card {
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s ease;
        }

        .service-card:hover {
            transform: translateY(-5px);
        }

        .service-card h3 {
            color: #1a237e;
            margin-bottom: 1rem;
        }

        /* Form Section */
        .form-section {
            background-color: #f5f5f5;
            padding: 4rem 2rem;
        }

        .form-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .form-container h2 {
            text-align: center;
            color: #1a237e;
            margin-bottom: 2rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: #333;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .submit-btn {
            background-color: #1a237e;
            color: white;
            padding: 1rem 2rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            width: 100%;
            font-size: 1rem;
        }

        .submit-btn:hover {
            background-color: #283593;
        }

        /* Footer */
        footer {
            background-color: #1a237e;
            color: white;
            padding: 2rem;
            text-align: center;
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="./Main.html" class="logo">Crime Report Portal</a>
            <div class="nav-links">
                <a href="./Main.html">Home</a>
                <a href="#services">Services</a>
                <a href="#report">Report Crime</a>
                <a href="#contact">Contact</a>
            </div>
        </div>
    </nav>


    <!-- Services Section -->
 
    <!-- Form Section -->
    <div class="cendiv">
        <div class="container">
            <h1>Crime Reporting System</h1>
            <form id="crime-form">
              
              <!-- Complainant Details -->
              <h3>Complainant Details</h3>
              <label for="complainant-name">Name:</label>
              <input type="text" id="complainant-name" name="complainant-name" required>
        
              <label for="father-husband-name">Father's/Husband's Name:</label>
              <input type="text" id="father-husband-name" name="father-husband-name" required>
        
              <label for="complainant-address">Address:</label>
              <input type="text" id="complainant-address" name="complainant-address" required>
        
              <label for="contact-number">Contact Number:</label>
              <input type="tel" id="contact-number" name="contact-number" required>
        
              <!-- Police Station Details -->
              <h3>Police Station Details</h3>
              <label for="police-station">Police Station:</label>
              <input type="text" id="police-station" name="police-station" required>
        
              <label for="district">District:</label>
              <input type="text" id="district" name="district" required>
        
              <!-- Date and Time of Occurrence -->
              <h3>Date and Time of Occurrence</h3>
              <label for="occurrence-date">Exact Date:</label>
              <input type="date" id="occurrence-date" name="occurrence-date" required>
        
              <label for="occurrence-time">Exact Time:</label>
              <input type="time" id="occurrence-time" name="occurrence-time" required>
        
              <!-- Place of Occurrence -->
              <h3>Place of Occurrence</h3>
              <label for="place-of-occurrence">Detailed Address:</label>
              <input type="text" id="place-of-occurrence" name="place-of-occurrence" required>
        
              <label for="distance-direction">Distance and Direction from Police Station:</label>
              <input type="text" id="distance-direction" name="distance-direction" required>
        
              <!-- Nature of Offense -->
              <h3>Nature of Offense</h3>
              <label for="offense-description">Description of Offense:</label>
              <textarea id="offense-description" name="offense-description" required></textarea>
        
              <label for="ipc-sections">Relevant IPC Sections:</label>
              <input type="text" id="ipc-sections" name="ipc-sections" required>
        
              <!-- Details of Accused -->
              <h3>Details of Accused</h3>
              <label for="accused-name">Accused Name:</label>
              <input type="text" id="accused-name" name="accused-name">
        
              <label for="accused-address">Accused Address:</label>
              <input type="text" id="accused-address" name="accused-address">
        
              <label for="accused-description">Accused Description:</label>
              <textarea id="accused-description" name="accused-description"></textarea>
        
              <!-- Witness Details -->
              <h3>Witness Details</h3>
              <label for="witness-names">Witness Names:</label>
              <input type="text" id="witness-names" name="witness-names">
        
              <label for="witness-addresses">Witness Addresses:</label>
              <input type="text" id="witness-addresses" name="witness-addresses">
        
              <!-- Description of Incident -->
              <h3>Description of Incident</h3>
              <label for="incident-description">Detailed Account of Incident:</label>
              <textarea id="incident-description" name="incident-description" required></textarea>
        
              <!-- Items Lost or Damaged -->
              <h3>Items Lost or Damaged</h3>
              <label for="items-lost-damaged">Description of Items:</label>
              <textarea id="items-lost-damaged" name="items-lost-damaged"></textarea>
        
              <!-- Complainant's Statement -->
              <h3>Complainant's Statement</h3>
              <label for="complainant-statement">Statement:</label>
              <textarea id="complainant-statement" name="complainant-statement" required></textarea>
        
              <!-- Signature and Thumb Impression -->
              <h3>Signature & Thumb Impression</h3>
              <label for="signature">Signature:</label>
              <input type="text" id="signature" name="signature" required>
        
              <label for="thumb-impression">Thumb Impression:</label>
              <input type="file" id="thumb-impression" name="thumb-impression">
        
              <button type="submit">Generate FIR</button>
              <!-- <a href="./all_FIR.html" target="_blank" rel="noopener noreferrer">open all</a> -->
            </form>
        
            <!-- Placeholder for the download link -->
            <div id="download-link-container"></div>
          </div>
    </div>
    
      <!-- Firebase Scripts -->
      <script type="module">
        // Import Firebase SDKs
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
        import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";
    
        // Firebase Configuration
        const firebaseConfig = {
          apiKey: "AIzaSyBy_BOSqZfTFPsH6Pb_pQUP5845PJScL1Y",
          authDomain: "crimereport-6a12b.firebaseapp.com",
          projectId: "crimereport-6a12b",
          storageBucket: "crimereport-6a12b.appspot.com",
          messagingSenderId: "666218285177",
          appId: "1:666218285177:web:2289a5408ecb5d59e9eca8",
          measurementId: "G-31PKZWXBBT"
        };
    
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
    
        // Form Submission Handler
        document.getElementById('crime-form').addEventListener('submit', async (e) => {
          e.preventDefault();
    
          // Collect form data
          const complainantName = document.getElementById('complainant-name').value;
          const fatherHusbandName = document.getElementById('father-husband-name').value;
          const complainantAddress = document.getElementById('complainant-address').value;
          const contactNumber = document.getElementById('contact-number').value;
    
          const policeStation = document.getElementById('police-station').value;
          const district = document.getElementById('district').value;
          
          const occurrenceDate = document.getElementById('occurrence-date').value;
          const occurrenceTime = document.getElementById('occurrence-time').value;
          const placeOfOccurrence = document.getElementById('place-of-occurrence').value;
          const distanceDirection = document.getElementById('distance-direction').value;
    
          const offenseDescription = document.getElementById('offense-description').value;
          const ipcSections = document.getElementById('ipc-sections').value;
    
          const accusedName = document.getElementById('accused-name').value;
          const accusedAddress = document.getElementById('accused-address').value;
          const accusedDescription = document.getElementById('accused-description').value;
    
          const witnessNames = document.getElementById('witness-names').value;
          const witnessAddresses = document.getElementById('witness-addresses').value;
    
          const incidentDescription = document.getElementById('incident-description').value;
          const itemsLostDamaged = document.getElementById('items-lost-damaged').value;
    
          const complainantStatement = document.getElementById('complainant-statement').value;
    
          const signature = document.getElementById('signature').value;
          const thumbImpression = document.getElementById('thumb-impression').files[0];  // You can handle the file upload here if needed
    
          // FIR Data Object
          const firData = {
            complainant_name: complainantName,
            father_husband_name: fatherHusbandName,
            complainant_address: complainantAddress,
            contact_number: contactNumber,
            police_station: policeStation,
            district: district,
            occurrence_date: occurrenceDate,
            occurrence_time: occurrenceTime,
            place_of_occurrence: placeOfOccurrence,
            distance_direction: distanceDirection,
            offense_description: offenseDescription,
            ipc_sections: ipcSections,
            accused_name: accusedName,
            accused_address: accusedAddress,
            accused_description: accusedDescription,
            witness_names: witnessNames,
            witness_addresses: witnessAddresses,
            incident_description: incidentDescription,
            items_lost_damaged: itemsLostDamaged,
            complainant_statement: complainantStatement,
            signature: signature,
            thumb_impression: thumbImpression ? thumbImpression.name : null,  // If uploading thumb impression
            timestamp: serverTimestamp(),
          };
    
          try {
            await addDoc(collection(db, "fir_reports"), firData);
            alert("FIR Generated Successfully!");
    
            // Generate PDF after form submission
            generatePDF(firData);
          } catch (error) {
            console.error("Error adding FIR: ", error);
            alert("Error generating FIR. Please try again.");
          }
        });
    
        // Function to generate PDF
        function generatePDF(firData) {
          const { jsPDF } = window.jspdf;
          const doc = new jsPDF();
    
          doc.setFontSize(16);
          doc.text("Crime Report", 14, 20);
          doc.setFontSize(12);
    
          let y = 30;
    
          doc.text(`Complainant Name: ${firData.complainant_name}`, 14, y);
          y += 10;
          doc.text(`Father/Husband Name: ${firData.father_husband_name}`, 14, y);
          y += 10;
          doc.text(`Address: ${firData.complainant_address}`, 14, y);
          y += 10;
          doc.text(`Contact Number: ${firData.contact_number}`, 14, y);
          y += 10;
    
          doc.text(`Police Station: ${firData.police_station}`, 14, y);
          y += 10;
          doc.text(`District: ${firData.district}`, 14, y);
          y += 10;
          doc.text(`Date of Occurrence: ${firData.occurrence_date}`, 14, y);
          y += 10;
          doc.text(`Time of Occurrence: ${firData.occurrence_time}`, 14, y);
          y += 10;
          doc.text(`Place of Occurrence: ${firData.place_of_occurrence}`, 14, y);
          y += 10;
          doc.text(`Distance and Direction: ${firData.distance_direction}`, 14, y);
          y += 10;
          doc.text(`Offense Description: ${firData.offense_description}`, 14, y);
          y += 10;
          doc.text(`IPC Sections: ${firData.ipc_sections}`, 14, y);
          y += 10;
    
          doc.text(`Accused Name: ${firData.accused_name}`, 14, y);
          y += 10;
          doc.text(`Accused Address: ${firData.accused_address}`, 14, y);
          y += 10;
          doc.text(`Accused Description: ${firData.accused_description}`, 14, y);
          y += 10;
    
          doc.text(`Witness Names: ${firData.witness_names}`, 14, y);
          y += 10;
          doc.text(`Witness Addresses: ${firData.witness_addresses}`, 14, y);
          y += 10;
    
          doc.text(`Incident Description: ${firData.incident_description}`, 14, y);
          y += 10;
          doc.text(`Items Lost or Damaged: ${firData.items_lost_damaged}`, 14, y);
          y += 10;
          doc.text(`Complainant Statement: ${firData.complainant_statement}`, 14, y);
          y += 10;
    
          doc.text(`Signature: ${firData.signature}`, 14, y);
          y += 10;
          doc.text(`Thumb Impression: ${firData.thumb_impression ? firData.thumb_impression : "N/A"}`, 14, y);
    
          // Generate download link
          const pdfUrl = doc.output('bloburl');
          const link = document.createElement('a');
          link.href = pdfUrl;
          link.download = `FIR_Report_${Date.now()}.pdf`;
          link.innerText = 'Download FIR PDF';
          
          document.getElementById('download-link-container').appendChild(link);
        }
      </script>

    <!-- Footer -->
    <footer>
        <p>&copy; 2025 Crime Reporting System. All rights reserved.</p>
    </footer>

    <script>
        // Form submission handler
        document.getElementById('crime-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Get form values
            const name = document.getElementById('complainant-name').value;
            const contact = document.getElementById('contact-number').value;
            const description = document.getElementById('incident-description').value;
            
            // You can add your form submission logic here
            alert('Report submitted successfully!');
            
            // Clear form
            this.reset();
        });

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
    </script>
</body>
</html>